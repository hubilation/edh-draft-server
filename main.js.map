{"version":3,"sources":["src/authentication.js","src/index.js"],"names":[],"mappings":"AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;ACPA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AAEA;;;;AAEA,mBAAS,GAAT,CACE,4BAAa,UAAS,QAAT,EAAmB,QAAnB,EAA6B,IAA7B,EAAmC;AAC9C,SAAO,KAAK,IAAL,EAAW,EAAE,IAAI,CAAN,EAAS,OAAO,MAAhB,EAAwB,MAAM,OAA9B,EAAX,CAAP;AACD,CAFD,CADF;;AAMA,mBAAS,aAAT,CAAuB,UAAS,IAAT,EAAe,IAAf,EAAqB;AAC1C,OAAK,IAAL,EAAW,KAAK,EAAhB;AACD,CAFD;;AAIA,mBAAS,eAAT,CAAyB,UAAS,EAAT,EAAa,IAAb,EAAmB;AAC1C,OAAK,IAAL,EAAW,EAAE,IAAI,CAAN,EAAS,OAAO,MAAhB,EAAwB,MAAM,OAA9B,EAAX;AACD,CAFD;;AAIA,IAAI,MAAM,wBAAV;;AAEA;AACA,IAAI,GAAJ,CAAQ,qBAAW,UAAX,CAAsB,EAAE,UAAU,KAAZ,EAAtB,CAAR;AACA,IAAI,GAAJ,CAAQ,qBAAW,IAAX,EAAR;AACA,IAAI,GAAJ,CACE,8BAAQ,EAAE,QAAQ,aAAV,EAAyB,QAAQ,KAAjC,EAAwC,mBAAmB,KAA3D,EAAR,CADF;AAGA,IAAI,GAAJ,CAAQ,mBAAS,UAAT,EAAR;AACA,IAAI,GAAJ,CAAQ,mBAAS,OAAT,EAAR;AACA;;AAEA,IAAI,GAAJ,CAAQ,QAAR,EAAkB,UAAS,GAAT,EAAc,GAAd,EAAmB;AACnC,MAAI,QAAJ,CAAa,eAAK,IAAL,CAAU,SAAV,EAAqB,KAArB,EAA4B,YAA5B,CAAb;AACD,CAFD;;AAIA,IAAI,IAAJ,CACE,QADF,EAEE,mBAAS,YAAT,CAAsB,OAAtB,EAA+B;AAC7B,mBAAiB,QADY;AAE7B,mBAAiB;AAFY,CAA/B,CAFF,EAME,UAAS,GAAT,EAAc,GAAd,EAAmB;AACjB,UAAQ,GAAR,CAAY,WAAZ;AACD,CARH;;AAWA,IAAI,GAAJ,CACE,GADF,EAEE,wCAAe,QAAf,CAFF,EAGE,UAAS,GAAT,EAAc,GAAd,EAAmB;AACjB,MAAI,IAAJ,CAAS,WAAT;AACD,CALH;;AAQA,IAAI,GAAJ,CAAQ,QAAR,EAAkB,wCAAe,QAAf,CAAlB,EAA4C,UAAS,GAAT,EAAc,GAAd,EAAmB;AAC7D,MAAI,IAAJ,YAAkB,IAAI,IAAJ,CAAS,IAA3B;AACD,CAFD;;AAIA,IAAI,GAAJ,CAAQ,OAAR,EAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB;AAClC,MAAI,IAAJ,CAAS,cAAT;AACD,CAFD;;AAIA,IAAI,MAAJ,CAAW,IAAX","file":"main.js","sourcesContent":["// import passport from 'passport';\r\n// import {LocalStrategy} from 'passport-local';\r\n\r\n// passport.use(new LocalStrategy(\r\n//     function(username, password, done){\r\n//         return done(null, {email:\"test\", name:\"steve\"});\r\n//     }\r\n// ))\r\n\r\n","import express from \"express\";\r\nimport session from \"express-session\";\r\nimport bodyParser from \"body-parser\";\r\nimport path from \"path\";\r\nimport passport from \"passport\";\r\nimport {ensureLoggedIn} from 'connect-ensure-login';\r\n\r\nimport { Strategy } from \"passport-local\";\r\n\r\npassport.use(\r\n  new Strategy(function(username, password, done) {\r\n    return done(null, { id: 1, email: \"test\", name: \"steve\" });\r\n  })\r\n);\r\n\r\npassport.serializeUser(function(user, done) {\r\n  done(null, user.id);\r\n});\r\n\r\npassport.deserializeUser(function(id, done) {\r\n  done(null, { id: 1, email: \"test\", name: \"steve\" });\r\n});\r\n\r\nvar app = express();\r\n\r\n// app.configure(function(){\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.json());\r\napp.use(\r\n  session({ secret: \"loldrafting\", resave: false, saveUninitialized: false })\r\n);\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n// });\r\n\r\napp.get(\"/login\", function(req, res) {\r\n  res.sendFile(path.join(__dirname, \"src\", \"login.html\"));\r\n});\r\n\r\napp.post(\r\n  \"/login\",\r\n  passport.authenticate(\"local\", {\r\n    successRedirect: \"/butts\",\r\n    failureRedirect: \"/fail\"\r\n  }),\r\n  function(req, res) {\r\n    console.log(\"got login\");\r\n  }\r\n);\r\n\r\napp.get(\r\n  \"/\",\r\n  ensureLoggedIn('/login'),\r\n  function(req, res) {\r\n    res.send(\"home page\");\r\n  }\r\n);\r\n\r\napp.get(\"/butts\", ensureLoggedIn('/login'), function(req, res) {\r\n  res.send(`hello ${req.user.name}, you logged in, sort of`);\r\n});\r\n\r\napp.get(\"/fail\", function(req, res) {\r\n  res.send(\"fuckin idiot\");\r\n});\r\n\r\napp.listen(5000);\r\n"]}